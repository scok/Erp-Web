<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/sidebar}"
>
<head>
    <meta charset="utf-8">
    <link th:href="@{/css/sb-admin-2.min.css}" rel="stylesheet">
    <link th:href="@{/css/table.css}" rel="stylesheet">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
    <script src="https://kit.fontawesome.com/549ed26fed.js" crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script>
    // 소트후 효과
        function handleClickEvent() {
          var isMouseDown = false;

          // 마우스를 올렸을 때
          $('table tr.odd').mouseover(function() {
            if (isMouseDown) {
              $(this).addClass('clicked');
            } else {
              $(this).addClass('highlight');
            }
          });

          // 마우스를 떼었을 때
          $('table tr.odd').mouseout(function() {
            if (!$(this).hasClass('clicked')) {
              $(this).removeClass('highlight');
            }
          });

          // 마우스를 누르고 있을 때
          $('table tr.odd').mousedown(function() {
            isMouseDown = true;
            $('table tr.odd').removeClass('clicked');
            $(this).addClass('clicked');
          });

          // 마우스를 떼었을 때
          $('table tr.odd').mouseup(function() {
            isMouseDown = false;
            $(this).removeClass('clicked');
          });

          // tr.odd 범위를 벗어났을 때
          $(document).mouseup(function() {
            isMouseDown = false;
            $('table tr.odd').removeClass('clicked');
            $('table tr.odd').removeClass('highlight');
          });
        }

        $(document).ready(function() {
          $('thead th').click(function() {
            var $th = $(this);
            var $table = $th.closest('table');

            if ($th.hasClass('sorting_asc')) {
              $th.removeClass('sorting_asc').addClass('sorting_desc');
              sortColumn($table, $th.index(), 'desc');
            } else if ($th.hasClass('sorting_desc')) {
              $th.removeClass('sorting_desc').addClass('sorting_asc');
              sortColumn($table, $th.index(), 'asc');
            } else {
              $table.find('thead th').removeClass('sorting_asc sorting_desc');
              $th.addClass('sorting_asc');
              sortColumn($table, $th.index(), 'asc');
            }
            handleClickEvent();
          });

          function sortColumn($table, columnIndex, sortDirection) {
            var $tbody = $table.find('tbody');
            var rows = $tbody.find('tr').get();

            rows.sort(function(a, b) {
              var aValue = $(a).find('td').eq(columnIndex).text().toUpperCase();
              var bValue = $(b).find('td').eq(columnIndex).text().toUpperCase();

              if (sortDirection === 'asc') {
                if ($.isNumeric(aValue) && $.isNumeric(bValue)) {
                  return parseFloat(aValue) - parseFloat(bValue);
                } else {
                  return aValue.localeCompare(bValue);
                }
              } else {
                if ($.isNumeric(aValue) && $.isNumeric(bValue)) {
                  return parseFloat(bValue) - parseFloat(aValue);
                } else {
                  return bValue.localeCompare(aValue);
                }
              }
            });

            $tbody.empty();

            $.each(rows, function(index, row) {
              $tbody.append(row);
            });
          }
        });
    </script>

    <!-- 페이징처리 & 검색엔진 -->
    <script th:inline="javascript">
        $(document).ready(function(){ /* 검색 button click */
            $("#searchBtn").on("click",function(e) {
                e.preventDefault();
                page(0);
            });
        });

        function page(page){
            var searchBy = $("#searchBy").val();
            var searchQuery = $("#searchQuery").val();

            location.href="/members/admin/payList/" + page
            + "?searchBy=" + searchBy
            + "&searchQuery=" + searchQuery;
        }
    </script>

    <script>
      $(document).ready(function() {
        var isMouseDown = false;

        // 마우스를 올렸을 때
        $('table tr.odd').mouseover(function() {
          if (isMouseDown) {
            $(this).addClass('clicked');
          } else {
            $(this).addClass('highlight');
          }
        });

        // 마우스를 떼었을 때
        $('table tr.odd').mouseout(function() {
          if (!$(this).hasClass('clicked')) {
            $(this).removeClass('highlight');
          }
        });

        // 마우스를 누르고 있을 때
        $('table tr.odd').mousedown(function() {
          isMouseDown = true;
          $('table tr.odd').removeClass('clicked');
          $(this).addClass('clicked');
        });

        // 마우스를 떼었을 때
        $('table tr.odd').mouseup(function() {
          isMouseDown = false;
          $(this).removeClass('clicked');
        });

        // tr.odd 범위를 벗어났을 때
        $(document).mouseup(function() {
          isMouseDown = false;
          $('table tr.odd').removeClass('clicked');
          $('table tr.odd').removeClass('highlight');
        });
      });
    </script>

    <script>
        //급여수정

          // 모달 열기
          function openModal4() {
            document.getElementById("myModal4").style.display = "block";
            document.addEventListener("keydown", closeModalOnEscape4);
            document.addEventListener("click", closeModalOnClickOutside4);
          }

          // 모달 닫기
          function closeModal4() {
            document.getElementById("myModal4").style.display = "none";
            document.removeEventListener("keydown", closeModalOnEscape4);
            document.removeEventListener("click", closeModalOnClickOutside4);
          }

          // ESC 키를 누를 때 모달 닫기
          function closeModalOnEscape4(event) {
            if (event.key === "Escape") {
              closeModal4();
            }
          }

          // 모달 바깥 영역을 클릭할 때 모달 닫기
          function closeModalOnClickOutside4(event) {
            if (event.target === document.getElementById("myModal4")) {
              closeModal4();
            }
          }



    </script>

    <script>
        // 급여디테일 값 표기
        function handleRowClick(row) {
            var tdPayId = row.getElementsByTagName("td")[0].innerText;

            var tdRegDate = row.getElementsByTagName("td")[2].innerText;
            var tdPlusMoney = row.getElementsByTagName("td")[3].innerText;
            var tdMinusMoney = row.getElementsByTagName("td")[4].innerText;
            var tdTotalMoney = row.getElementsByTagName("td")[5].innerText;

            var tdSalary = row.getElementsByTagName("td")[6].innerText;
            var tdBonus = row.getElementsByTagName("td")[7].innerText;
            var tdNightPay = row.getElementsByTagName("td")[8].innerText;
            var tdFoodPay = row.getElementsByTagName("td")[9].innerText;
            var tdCarPay = row.getElementsByTagName("td")[10].innerText;
            var tdGoInsurance = row.getElementsByTagName("td")[11].innerText;
            var tdGunInsurance = row.getElementsByTagName("td")[12].innerText;
            var tdSanInsurance = row.getElementsByTagName("td")[13].innerText;
            var tdKukInsurance = row.getElementsByTagName("td")[14].innerText;
            var tdIncomeTax = row.getElementsByTagName("td")[15].innerText;
            var tdLocalTax = row.getElementsByTagName("td")[16].innerText;

            var tdId = row.getElementsByTagName("td")[17].innerText;
            var tdName = row.getElementsByTagName("td")[18].innerText;
            var tdBirth = row.getElementsByTagName("td")[19].innerText;
            var tdDepartment = row.getElementsByTagName("td")[20].innerText;
            var tdPosition = row.getElementsByTagName("td")[21].innerText;
            var tdBank = row.getElementsByTagName("td")[22].innerText;



            //00년 00월 급여명세서 (급여 디테일)
            document.getElementById("detailRegDate").innerText = tdRegDate + " 급여명세서";
            //00년 00월 급여명세서 (급여 수정)
            document.getElementById("updateRegDate").innerText = tdRegDate + " 급여명세서";

            document.getElementById("detailPlusMoney").innerText = tdPlusMoney;
            document.getElementById("detailMinusMoney").innerText = tdMinusMoney;
            document.getElementById("detailTotalMoney").innerText = tdTotalMoney;

            document.getElementById("detailSalary").innerText = formatNumber(tdSalary) + "원";
            document.getElementById("detailBonus").innerText = formatNumber(tdBonus) + "원";
            document.getElementById("detailNightPay").innerText = formatNumber(tdNightPay) + "원";
            document.getElementById("detailFoodPay").innerText = formatNumber(tdFoodPay) + "원";
            document.getElementById("detailCarPay").innerText = formatNumber(tdCarPay) + "원";
            document.getElementById("detailGoInsurance").innerText = formatNumber(tdGoInsurance) + "원";
            document.getElementById("detailGunInsurance").innerText = formatNumber(tdGunInsurance) + "원";
            document.getElementById("detailSanInsurance").innerText = formatNumber(tdSanInsurance) + "원";
            document.getElementById("detailKukInsurance").innerText = formatNumber(tdKukInsurance) + "원";
            document.getElementById("detailIncomeTax").innerText = formatNumber(tdIncomeTax) + "원";
            document.getElementById("detailLocalTax").innerText = formatNumber(tdLocalTax) + "원";

            document.getElementById("detailId").innerText = tdId;
            document.getElementById("detailName").innerText = tdName;
            document.getElementById("detailBirth").innerText = tdBirth;
            document.getElementById("detailDepartment").innerText = tdDepartment;
            document.getElementById("detailPosition").innerText = tdPosition;
            document.getElementById("detailBank").innerText = tdBank;

            var form = document.getElementById("myForm"); // 폼의 ID를 지정해야 합니다.
            form.action = "/members/admin/payUpdateNew2/" + tdId + "/" + tdPayId;

            openModal3(); // 페이지 이동 후 모달 열기 함수를 호출합니다.

            // 급여 수정 값 넣어주기

            var salaryUpdate = row.getElementsByTagName("td")[6].innerText;
            var bonusUpdate = row.getElementsByTagName("td")[7].innerText;
            var nightPayUpdate = row.getElementsByTagName("td")[8].innerText;
            var foodPayUpdate = row.getElementsByTagName("td")[9].innerText;
            var carPayUpdate = row.getElementsByTagName("td")[10].innerText;

            var tdId2 = row.getElementsByTagName("td")[17].innerText;
            var tdName2 = row.getElementsByTagName("td")[18].innerText;
            var tdBirth2 = row.getElementsByTagName("td")[19].innerText;
            var tdDepartment2 = row.getElementsByTagName("td")[20].innerText;
            var tdPosition2 = row.getElementsByTagName("td")[21].innerText;
            var tdBank2 = row.getElementsByTagName("td")[22].innerText;

            document.getElementById("salaryUpdate").value = formatNumber(salaryUpdate);
            document.getElementById("bonusUpdate").value = formatNumber(bonusUpdate);
            document.getElementById("nightPayUpdate").value = formatNumber(nightPayUpdate);
            document.getElementById("foodPayUpdate").value = formatNumber(foodPayUpdate);
            document.getElementById("carPayUpdate").value = formatNumber(carPayUpdate);

            document.getElementById("updateId").innerText = tdId2;
            document.getElementById("updateName").innerText = tdName2;
            document.getElementById("updateBirth").innerText = tdBirth2;
            document.getElementById("updateDepartment").innerText = tdDepartment2;
            document.getElementById("updatePosition").innerText = tdPosition2;
            document.getElementById("updateBank").innerText = tdBank2;


        }; //급여디테일 값 표기 닫는 태그


        // 모달 열기
        function openModal3() {
            document.getElementById("myModal3").style.display = "block";
            document.addEventListener("keydown", closeModalOnEscape3);
            document.addEventListener("click", closeModalOnClickOutside3);
        }

        // 모달 닫기
        function closeModal3() {
            document.getElementById("myModal3").style.display = "none";
            document.removeEventListener("keydown", closeModalOnEscape3);
            document.removeEventListener("click", closeModalOnClickOutside3);
        }

        // ESC 키를 누를 때 모달 닫기
        function closeModalOnEscape3(event) {
            if (event.key === "Escape") {
                closeModal3();
            }
        }


        // 모달 바깥 영역을 클릭할 때 모달 닫기
        function closeModalOnClickOutside3(event) {
            if (event.target === document.getElementById("myModal3")) {
                closeModal3();
            }
        }
    </script>

    <script>
    // 급여 수정 계산기 함수
    var payUpdateTotal = 0;

    function updateCalculateTotal() {
    console.log('수정 계산기 호출됨');
    var inputs = document.querySelectorAll('#payUpdateTable1 input[type="text"]');
    var totalPrice = 0;
    for (var i = 0; i < inputs.length; i++) {
    var value = parseFloat(inputs[i].value.replace(/,/g, '')); // 쉼표 제거 후 숫자로 변환
    if (!isNaN(value)) {
    totalPrice += value;
     }
    }
    payUpdateTotal = totalPrice;
    $('input[name="plusMoney"]').val(payUpdateTotal);
    document.getElementById('payUpdateTotal').textContent = formatNumber(totalPrice) + '원';

    //급여 수정 세금 계산 함수 호출
    updateTaxCalculate();

    // 급여 수정 차감지급액 업데이트 함수 호출
    updateDeductionTotal2();

    }

    function formatNumber(number) {
    return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }

    // 급여 수정 차감지급액 업데이트 함수
    function updateDeductionTotal2() {
    var deductionTotal = payUpdateTotal - updatetotalTax;
    $('input[name="TotalMoney"]').val(deductionTotal.toFixed(0));
    document.getElementById('deductionTotal2').textContent = formatNumber(deductionTotal.toFixed(0)) + '원';
    console.log('수정업데이트?');
    console.log('payUpdateTotal'+payUpdateTotal);
    console.log('updatetotalTax'+updatetotalTax);
    console.log('deductionTotal'+deductionTotal);
    }

    // 급여 수정 세금 계산 함수
    var updatetotalTax = 0;
    function updateTaxCalculate(){
    console.log('세금 계산 함수');
    var inputs = document.querySelectorAll('#payUpdateTable1 input[type="text"]');
    var goInsurance = 0;
    var gunInsurance = 0;
    var sanInsurance = 0;
    var kukInsurance = 0;
    var incomeTax = 0;
    var localTax = 0;

    for (var i = 0; i < inputs.length; i++) {
    var value = parseFloat(inputs[i].value.replace(/,/g, '')); // 쉼표 제거 후 숫자로 변환
    if (!isNaN(value)) {
    // 공제항목 소숫점 반올림
    goInsurance += parseFloat((value * 0.009).toFixed(0));
    gunInsurance += parseFloat((value * 0.035).toFixed(0));
    sanInsurance += parseFloat((value * 0.014).toFixed(0));
    kukInsurance += parseFloat((value * 0.045).toFixed(0));
    incomeTax += parseFloat((value * 0.01).toFixed(0));
    localTax += parseFloat((value * 0.01).toFixed(0));
    }
    $('input[name="goInsurance"]').val(goInsurance);
    $('input[name="gunInsurance"]').val(gunInsurance);
    $('input[name="sanInsurance"]').val(sanInsurance);
    $('input[name="kukInsurance"]').val(kukInsurance);
    $('input[name="incomeTax"]').val(incomeTax);
    $('input[name="localTax"]').val(localTax);


    updatetotalTax = goInsurance + gunInsurance + sanInsurance + kukInsurance + incomeTax + localTax;
    $('input[name="minusMoney"]').val(updatetotalTax);
    }
    document.getElementById('goInsuranceUpdate').textContent = formatNumber(goInsurance) + '원';
    document.getElementById('gunInsuranceUpdate').textContent = formatNumber(gunInsurance) + '원';
    document.getElementById('sanInsuranceUpdate').textContent = formatNumber(sanInsurance) + '원';
    document.getElementById('kukInsuranceUpdate').textContent = formatNumber(kukInsurance) + '원';
    document.getElementById('incomeTaxUpdate').textContent = formatNumber(incomeTax) + '원';
    document.getElementById('localTaxUpdate').textContent = formatNumber(localTax) + '원';
    document.getElementById('updateMinusMoney').textContent = formatNumber(updatetotalTax) + '원';
    } // 세금 계산 함수 닫는 태그
    </script>

    <script>
      // 화면에 있는 ,를 제거해주는 함수 (급여수정)
      function calculateTotal88() {
        var inputs = document.querySelectorAll('#payUpdateTable1 input[type="text"]');
        var salary = 0;
        var bonus = 0;
        var nightPay = 0;
        var foodPay = 0;
        var carPay = 0;

        for (var i = 0; i < inputs.length; i++) {
          var value = parseFloat(inputs[i].value.replace(/,/g, '')); // 쉼표 제거 후 숫자로 변환
          if (!isNaN(value)) {

            if (inputs[i].id === "salaryUpdate") {
              salary = value;

            } else if (inputs[i].id === "bonusUpdate") {
              bonus = value;
            } else if (inputs[i].id === "nightPayUpdate") {
              nightPay = value;
            } else if (inputs[i].id === "foodPayUpdate") {
              foodPay = value;
            } else if (inputs[i].id === "carPayUpdate") {
              carPay = value;
            }
          }
        }
          $('input[name="salary"]').val(salary);
          $('input[name="bonus"]').val(bonus);
          $('input[name="nightPay"]').val(nightPay);
          $('input[name="foodPay"]').val(foodPay);
          $('input[name="carPay"]').val(carPay);

      }

      // 급여 수정 폼 전송 함수
      function sweetAlert3(event) {
            event.preventDefault(); // 폼 제출 기본 동작 중지
            console.log('급여 수정 폼 제출 기본 동작 중지');

            return new Promise((resolve) => {
                Swal.fire({
                    title: '급여를 수정 하시겠습니까?',
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonColor: '#73685d',
                    cancelButtonColor: '#6e7881',
                    confirmButtonText: 'OK',
                    cancelButtonText: 'Cancel'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // MyDTO3 객체 생성
                        const payUpdateTotal = parseFloat(document.getElementById('payUpdateTotal').textContent.replace(/[^0-9.-]+/g, '')); // payUpdateTotal 값 가져오기
                        const updateMinusMoney = parseFloat(document.getElementById('updateMinusMoney').textContent.replace(/[^0-9.-]+/g, '')); // updateMinusMoney 값 가져오기
                        const deductionTotal2 = payUpdateTotal - updateMinusMoney;

                        const MyDTO3 = {
                            salary: document.getElementById('salaryUpdate').value.replace(/,/g, ''),
                            bonus: document.getElementById('bonusUpdate').value.replace(/,/g, ''),
                            nightPay: document.getElementById('nightPayUpdate').value.replace(/,/g, ''),
                            foodPay: document.getElementById('foodPayUpdate').value.replace(/,/g, ''),
                            carPay: document.getElementById('carPayUpdate').value.replace(/,/g, ''),
                            plusMoney: payUpdateTotal,
                            minusMoney: updateMinusMoney,
                            TotalMoney: deductionTotal2
                        };

                        // 유효성 검사
                        const errors = validateMyDTO3(MyDTO3);
                        if (errors.length > 0) {
                            // 오류 메시지 출력
                            Swal.fire({
                                title: 'Error',
                                icon: 'error',
                                html: errors[0],
                                confirmButtonColor: '#73685d'
                            });
                        } else {
                            // ,를 제거해주는 함수 호출
                            calculateTotal88();

                            Swal.fire({
                                title: 'Completed!',
                                icon: 'success',
                                confirmButtonColor: '#73685d'
                            }).then(() => {
                                // 폼을 수동으로 제출
                                event.target.form.submit();
                            });
                        }
                    }
                });
            });
        }
        // MyDTO3 객체의 유효성 검사 함수
        function validateMyDTO3(myDTO3) {
            const errors = [];

            // 각 필드에 대한 유효성 검사
            if (!myDTO3.salary) {
                errors.push('기본급을 입력해 주세요.');
            }else if (isNaN(myDTO3.salary) || myDTO3.salary.trim() === ''){
                errors.push('기본급을 숫자로 입력해 주세요.');
            }

            if (!myDTO3.bonus) {
                errors.push('상여금을 입력해 주세요.');
            }else if (isNaN(myDTO3.bonus) || myDTO3.bonus.trim() === ''){
                errors.push('상여금을 숫자로 입력해 주세요.');
            }

            if (!myDTO3.nightPay) {
                errors.push('야근수당을 입력해 주세요.');
            }else if (isNaN(myDTO3.nightPay) || myDTO3.nightPay.trim() === ''){
                errors.push('야근수당을 숫자로 입력해 주세요.');
            }

            if (!myDTO3.foodPay) {
                errors.push('식비를 입력해 주세요.');
            }else if (isNaN(myDTO3.foodPay) || myDTO3.foodPay.trim() === ''){
                errors.push('식비를 숫자로 입력해 주세요.');
            }

            if (!myDTO3.carPay) {
                errors.push('차량지원금을 입력해 주세요.');
            }else if (isNaN(myDTO3.carPay) || myDTO3.carPay.trim() === ''){
                errors.push('차량지원금을 숫자로 입력해 주세요.');
            }
            return errors;
        }
    </script>


    <script th:inline="javascript">

    // 급여리스트에 ,를 붙여주는 함수
        $(document).ready(function() {
         $(".pp").each(function() {
            var plusMoney = $(this).text();
            var formattedPlusMoney = formatNumber(plusMoney) + "원";
         $(this).text(formattedPlusMoney);
        });

        $(".mm").each(function() {
        var minusMoney = $(this).text();
        var formattedMinusMoney = formatNumber(minusMoney) + "원";
        $(this).text(formattedMinusMoney);
        });

        $(".tt").each(function() {
        var totalMoney = $(this).text();
        var formattedTotalMoney = formatNumber(totalMoney) + "원";
        $(this).text(formattedTotalMoney);
        });
        });

        function formatNumber(number) {
            return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
// 급여리스트에 ,를 붙여주는 함수 끝

        // 지급항목 테이블에 입력된 숫자를 합산하는 함수
        var totalPrice3 = 0;
        function calculateTotal() {
        console.log('계산기1 호출됨');
          var inputs = document.querySelectorAll('#dataTable1 input[type="text"]');
          var totalPrice = 0;
          for (var i = 0; i < inputs.length; i++) {
            var value = parseFloat(inputs[i].value.replace(/,/g, '')); // 쉼표 제거 후 숫자로 변환
            if (!isNaN(value)) {
              totalPrice += value;
            }
          }
          totalPrice3 = totalPrice;
          $('input[name="plusMoney"]').val(totalPrice3);
          document.getElementById('totalPrice').textContent = formatNumber(totalPrice) + '원';

          // 세금 계산 함수 호출
          taxCalculate();

          // 차감지급액 업데이트 함수 호출
          updateDeductionTotal();

        }

        function formatNumber(number) {
          return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        // 차감지급액 업데이트 함수
        function updateDeductionTotal() {
          var deductionTotal = totalPrice3 - totalTax;
          $('input[name="TotalMoney"]').val(deductionTotal.toFixed(0));
          document.getElementById('deductionTotal').textContent = formatNumber(deductionTotal.toFixed(0)) + '원';
          console.log('업데이트?');
        }

        // 세금 계산 함수
        var totalTax = 0;
        function taxCalculate(){
         console.log('세금 계산 함수');
          var inputs = document.querySelectorAll('#dataTable1 input[type="text"]');
          var goInsurance = 0;
          var gunInsurance = 0;
          var sanInsurance = 0;
          var kukInsurance = 0;
          var incomeTax = 0;
          var localTax = 0;

          for (var i = 0; i < inputs.length; i++) {
            var value = parseFloat(inputs[i].value.replace(/,/g, '')); // 쉼표 제거 후 숫자로 변환
            if (!isNaN(value)) {
              // 공제항목 소숫점 반올림
              goInsurance += parseFloat((value * 0.009).toFixed(0));
              gunInsurance += parseFloat((value * 0.035).toFixed(0));
              sanInsurance += parseFloat((value * 0.014).toFixed(0));
              kukInsurance += parseFloat((value * 0.045).toFixed(0));
              incomeTax += parseFloat((value * 0.01).toFixed(0));
              localTax += parseFloat((value * 0.01).toFixed(0));
            }
            $('input[name="goInsurance"]').val(goInsurance);
            $('input[name="gunInsurance"]').val(gunInsurance);
            $('input[name="sanInsurance"]').val(sanInsurance);
            $('input[name="kukInsurance"]').val(kukInsurance);
            $('input[name="incomeTax"]').val(incomeTax);
            $('input[name="localTax"]').val(localTax);

            totalTax = goInsurance + gunInsurance + sanInsurance + kukInsurance + incomeTax + localTax;
            $('input[name="minusMoney"]').val(totalTax);
          }
          document.getElementById('goInsurance').textContent = formatNumber(goInsurance) + '원';
          document.getElementById('gunInsurance').textContent = formatNumber(gunInsurance) + '원';
          document.getElementById('sanInsurance').textContent = formatNumber(sanInsurance) + '원';
          document.getElementById('kukInsurance').textContent = formatNumber(kukInsurance) + '원';
          document.getElementById('incomeTax').textContent = formatNumber(incomeTax) + '원';
          document.getElementById('localTax').textContent = formatNumber(localTax) + '원';
          document.getElementById('totalPrice2').textContent = formatNumber(totalTax) + '원';
        } // 세금 계산 함수 닫는 태그
    </script>

    <script>
      // 화면에 있는 ,를 제거해주는 함수
      function calculateTotal99() {
        var inputs = document.querySelectorAll('#dataTable1 input[type="text"]');
        var salary = 0;
        var bonus = 0;
        var nightPay = 0;
        var foodPay = 0;
        var carPay = 0;

        for (var i = 0; i < inputs.length; i++) {
          var value = parseFloat(inputs[i].value.replace(/,/g, '')); // 쉼표 제거 후 숫자로 변환
          if (!isNaN(value)) {

            if (inputs[i].id === "salary") {
              salary = value;
            } else if (inputs[i].id === "bonus") {
              bonus = value;
            } else if (inputs[i].id === "nightPay") {
              nightPay = value;
            } else if (inputs[i].id === "foodPay") {
              foodPay = value;
            } else if (inputs[i].id === "carPay") {
              carPay = value;
            }
          }
        }
          $('input[name="salary"]').val(salary);
          $('input[name="bonus"]').val(bonus);
          $('input[name="nightPay"]').val(nightPay);
          $('input[name="foodPay"]').val(foodPay);
          $('input[name="carPay"]').val(carPay);
      }

      // 오늘 날짜를 가져오는 함수
       function getFormattedDate() {
          var today = new Date();
          var year = today.getFullYear().toString().substr(-2); // 뒤에서 2자리만 추출
          var month = (today.getMonth() + 1).toString().padStart(2, '0'); // 0부터 시작하므로 +1, 2자리로 맞춤
          var formattedDate = year + '년 ' + month + '월';
          return formattedDate;
       }

        // 변수에 오늘 날짜 대입
        var currentDate = getFormattedDate();

        // 출력
        console.log(currentDate);


      // 마지막 폼 전송 함수
      function sweetAlert2(event) {
            event.preventDefault(); // 폼 제출 기본 동작 중지
            console.log('폼 제출 기본 동작 중지');
            return new Promise((resolve) => {
                Swal.fire({
                    title: '등록 하시겠습니까?',
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonColor: '#73685d',
                    cancelButtonColor: '#6e7881',
                    confirmButtonText: 'OK',
                    cancelButtonText: 'Cancel'

                }).then((result) => {
                    if (result.isConfirmed) {
                        // MyDTO2 객체 생성
                        const totalPrice3 = parseFloat(document.getElementById('totalPrice').textContent.replace(/[^0-9.-]+/g, '')); // totalPrice3 값 가져오기
                        const totalPrice4 = parseFloat(document.getElementById('totalPrice2').textContent.replace(/[^0-9.-]+/g, '')); // totalPrice4 값 가져오기
                        const deductionTotal = totalPrice3 - totalPrice4;
                        const regDateValue = $('#xxx').text();

                        const MyDTO2 = {
                            salary: document.getElementById('salary').value.replace(/,/g, ''),
                            bonus: document.getElementById('bonus').value.replace(/,/g, ''),
                            nightPay: document.getElementById('nightPay').value.replace(/,/g, ''),
                            foodPay: document.getElementById('foodPay').value.replace(/,/g, ''),
                            carPay: document.getElementById('carPay').value.replace(/,/g, ''),
                            plusMoney: totalPrice3,
                            minusMoney: totalPrice4,
                            TotalMoney: deductionTotal,
                            regDate: regDateValue
                        };

                        // 유효성 검사
                        const errors = validateMyDTO2(MyDTO2);
                        if (errors.length > 0) {
                            // 오류 메시지 출력
                            Swal.fire({
                                title: 'Error',
                                icon: 'error',
                                html: errors[0],
                                confirmButtonColor: '#73685d'
                            });
                        } else {
                            // ,를 제거해주는 함수 호출
                            calculateTotal99();

                            Swal.fire({
                                title: 'Completed!',
                                icon: 'success',
                                confirmButtonColor: '#73685d'
                            }).then(() => {
                                // 폼을 수동으로 제출
                                event.target.form.submit();
                            });
                        }
                    }
                });
            });
        }
        // MyDTO2 객체의 유효성 검사 함수
        function validateMyDTO2(myDTO2) {
            const errors = [];

            // 각 필드에 대한 유효성 검사
            if (myDTO2.regDate===currentDate) {
                errors.push('이미 급여가 있습니다.');
            }

            // 각 필드에 대한 유효성 검사
            if (!myDTO2.salary) {
                errors.push('기본급을 입력해 주세요.');
            }else if (isNaN(myDTO2.salary) || myDTO2.salary.trim() === ''){
                errors.push('기본급을 숫자로 입력해 주세요.');
            }

            if (!myDTO2.bonus) {
                errors.push('상여금을 입력해 주세요.');
            }else if (isNaN(myDTO2.bonus) || myDTO2.bonus.trim() === ''){
                errors.push('상여금을 숫자로 입력해 주세요.');
            }

            if (!myDTO2.nightPay) {
                errors.push('야근수당을 입력해 주세요.');
            }else if (isNaN(myDTO2.nightPay) || myDTO2.nightPay.trim() === ''){
                errors.push('야근수당을 숫자로 입력해 주세요.');
            }

            if (!myDTO2.foodPay) {
                errors.push('식비를 입력해 주세요.');
            }else if (isNaN(myDTO2.foodPay) || myDTO2.foodPay.trim() === ''){
                errors.push('식비를 숫자로 입력해 주세요.');
            }

            if (!myDTO2.carPay) {
                errors.push('차량지원금을 입력해 주세요.');
            }else if (isNaN(myDTO2.carPay) || myDTO2.carPay.trim() === ''){
                errors.push('차량지원금을 숫자로 입력해 주세요.');
            }
        return errors;
        }
    </script>


</head>

<div class="content" layout:fragment="content">
    <body class="background-color-white">
        <div class="container-fluid">
            <div class="row">
                <div class="list-container">
                    <div class="card o-hidden border-0 shadow-lg my-5">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-brown">Pay List</h6>
                        </div>
                        <div class="card-body p-0">
                            <div class="row">
                                <div class="col-lg-12 d-none d-lg-block">
                                    <div class="p-5">
                                        <form th:action="@{'/members/payList/'}" role="form"
                                              method="get" th:object="${memberPays}">

                                            <!-- /* 필드 검색 */ -->
                                            <div class="form-inline justify-content-end" th:object="${searchDto}" style="margin-right: 15px;">
                                                <select th:field="*{searchBy}" class="form-control" style="margin-left: 5px;">
                                                    <option value="">전체보기</option>
                                                    <option value="name">이름</option>
                                                    <option value="pay_id">급여번호</option>
                                                </select>
                                                <input th:field="*{searchQuery}" class="form-control" type="text" placeholder="검색어를 입력해 주세요." style="margin-left: 5px;">
                                                <button id="searchBtn" type="submit" class="btn btn-background-brown" style="margin-left: 5px;">검색</button>
                                            </div>

                                            &nbsp;&nbsp;

                                            <div class="col-sm-12">
                                                <table class="table table-bordered dataTable" id="dataTable" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%; text-align: right;">

                                                    <thead>
                                                    <tr role="row">
                                                        <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Id: activate to sort column ascending" style="width: 10%;" aria-sort="descending">
                                                            급여번호
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 17%;">
                                                            이름(사번)
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Email: activate to sort column ascending" style="width: 10%;">
                                                            지급연월
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Department: activate to sort column ascending" style="width: 21%;">
                                                            지급총액
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 21%;">
                                                            공제총액
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="MemberStatus: activate to sort column ascending" style="width: 21%;">
                                                            차감지급액
                                                        </th>
                                                    </tr>
                                                    </thead>

                                                    <tbody>
                                                        <tr class="odd" th:each="bean, status: ${memberPays.getContent()}" onclick="handleRowClick(this)">
                                                            <td class="sorting_1" th:text="${bean.id}"></td>
                                                            <td th:text="${bean.member.name} + ' (' + ${bean.member.id} + ')'"></td>
                                                            <td id="xxx" th:text="|${bean.regDate.getYear() % 100}년 ${#numbers.formatInteger(bean.regDate.getMonthValue(), '02')}월|"></td>
                                                            <td class="pp" th:text="${bean.plusMoney}"></td>
                                                            <td class="mm" th:text="${bean.minusMoney}"></td>
                                                            <td class="tt" th:text="${bean.TotalMoney}"></td>


                                                            <td style="display: none;" th:text="${bean.salary}"></td>
                                                            <td style="display: none;" th:text="${bean.bonus}"></td>
                                                            <td style="display: none;" th:text="${bean.nightPay}"></td>
                                                            <td style="display: none;" th:text="${bean.foodPay}"></td>
                                                            <td style="display: none;" th:text="${bean.carPay}"></td>
                                                            <td style="display: none;" th:text="${bean.goInsurance}"></td>
                                                            <td style="display: none;" th:text="${bean.gunInsurance}"></td>
                                                            <td style="display: none;" th:text="${bean.sanInsurance}"></td>
                                                            <td style="display: none;" th:text="${bean.kukInsurance}"></td>
                                                            <td style="display: none;" th:text="${bean.incomeTax}"></td>
                                                            <td style="display: none;" th:text="${bean.localTax}"></td>

                                                            <td style="display: none;" th:text="${bean.member.id}"></td>
                                                            <td style="display: none;" th:text="${bean.member.name}"></td>
                                                            <td style="display: none;" th:text="${bean.member.birth}"></td>
                                                            <td style="display: none;" th:text="${bean.member.department}"></td>
                                                            <td style="display: none;" th:text="${bean.member.position}"></td>
                                                            <td style="display: none;" th:text="${bean.member.bank}"></td>

                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <!-- /* 페이지 네이션 */ -->
                                            <div th:with="start=${(memberPays.number/maxPage)*maxPage + 1}, end=(${(memberPays.totalPages == 0) ? 1 : (start + (maxPage - 1) < memberPays.totalPages ? start + (maxPage - 1) : memberPays.totalPages)})" >
                                                <ul class="pagination justify-content-center">
                                                    <li class="page-item" th:classappend="${memberPays.first}?'disabled'">
                                                        <a th:onclick="'javascript:page(' + ${memberPays.number - 1} + ')'" aria-label='Previous' class="page-link">
                                                            <span aria-hidden='true'>Previous</span>
                                                        </a>
                                                    </li>
                                                    <li class="page-item" th:each="page: ${#numbers.sequence(start, end)}" th:classappend="${memberPays.number eq page-1}?'active':''">
                                                        <a th:onclick="'javascript:page(' + ${page - 1} + ')'" th:inline="text" class="page-link">[[${page}]]</a>
                                                    </li>
                                                    <li class="page-item" th:classappend="${memberPays.last}?'disabled'">
                                                        <a th:onclick="'javascript:page(' + ${memberPays.number + 1} + ')'" aria-label='Next' class="page-link">
                                                            <span aria-hidden='true'>Next</span>
                                                        </a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- 급여 디테일 폼 -->
                <div id="myModal3" class="modal3">
                    <div class="modal-content3">

                        <div class="card o-hidden border-0 shadow-lg my-2">
                            <form action="" role="form" method="post">
                                <div class="card-header py-3">
                                    <h4 id="detailRegDate" class="m-0 font-weight-bold text-brown" style="text-align: center;"></h4>
                                </div>
                                <div class="close-button" onclick="closeModal3()"><i class="fa-solid fa-xmark"></i></div>
                                <div class="card-body3">

                                    <div class="row">

                                        <div class="col-lg-6 d-none d-lg-block">
                                            <div class="p-52" style="text-align:right;">
                                                <table class="table-bordered dataTable" cellspacing="0" role="grid"  style="text-align:center; width: 515px;">
                                                    <tbody>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">사번</td>
                                                        <td style="text-align:center;"><span id="detailId"></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">이름</td>
                                                        <td style="text-align:center;"><span id="detailName"></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">생년월일</td>
                                                        <td style="text-align:center;"><span id="detailBirth"></span></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>

                                        <div class="col-lg-6">
                                            <div class="p-52" style="text-align:right;">
                                                <table class="table-bordered dataTable" cellspacing="0" role="grid"  style="text-align:center; width: 515px;">
                                                    <tbody>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">부서</td>
                                                        <td style="text-align:center;"><span id="detailDepartment"></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">직위</td>
                                                        <td style="text-align:center;"><span id="detailPosition"></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">계좌번호</td>
                                                        <td style="text-align:center;"><span id="detailBank"></span></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>



                                    <div class="card-body p-0612-1">
                                        <!-- Nested Row within Card Body -->
                                        <div class="row">
                                            <div class="col-lg-6 d-none d-lg-block">
                                                <div class="p-52">
                                                    <table class="table table-bordered dataTable" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%;">
                                                        <thead>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" colspan="2" style="text-align: center;">
                                                                지급 항목
                                                            </td>
                                                        </tr>
                                                        </thead>

                                                        <tbody>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px; height:39px;">기본급</td>
                                                            <td style="text-align:right;"><span id="detailSalary"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">상여금</td>
                                                            <td style="text-align:right;"><span id="detailBonus"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">야근수당</td>
                                                            <td style="text-align:right;"><span id="detailNightPay"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">식비</td>
                                                            <td style="text-align:right;"><span id="detailFoodPay"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">차량지원금</td>
                                                            <td style="text-align:right;"><span id="detailCarPay"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;"></td>
                                                            <td></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;"></td>
                                                            <td></td>
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">지급총액</td>
                                                            <td class="font-weight-bold background-color-white" style="text-align:right;"><span id="detailPlusMoney"></span></td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>


                                            <div class="col-lg-6" >
                                                <div class="p-52">
                                                    <table class="table table-bordered dataTable"  width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%;">
                                                        <thead>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" colspan="2" style="text-align: center;">
                                                                공제 항목
                                                            </td>
                                                        </tr>
                                                        </thead>

                                                        <tbody>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px; height:39px;">고용보험</td>
                                                            <td style="text-align:right;"><span id="detailGoInsurance"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">건강보험</td>
                                                            <td style="text-align:right;"><span id="detailGunInsurance"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">산재보험</td>
                                                            <td style="text-align:right;"><span id="detailSanInsurance"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">국민연금</td>
                                                            <td style="text-align:right;"><span id="detailKukInsurance"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">소득세</td>
                                                            <td style="text-align:right;"><span id="detailIncomeTax"></span></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">지방소득세</td>
                                                            <td style="text-align:right;"><span id="detailLocalTax"></span></td>
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">공제총액</td>
                                                            <td class="font-weight-bold background-color-white" style="text-align:right;"><span id="detailMinusMoney"></span></td>
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;">차감지급액</td>
                                                            <td class="font-weight-bold background-color-white" style="text-align:right;"><span id="detailTotalMoney"></span></td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                    <!--            보안 관련 인증 토큰을 히든 파라미터로 보내줍니다-->
                                                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="button" class="btn btn-background-brown btn-user btn-block" style="width:150px; float: right;" onclick="openModal4(); closeModal3(); updateCalculateTotal();">
                                        Edit
                                    </button>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>


                <!-- 급여 수정 등록 폼 -->
                <div id="myModal4" class="modal4">
                    <div class="modal-content4">


                        <div class="card o-hidden border-0 shadow-lg my-2">
                            <form id="myForm" th:action="@{'/members/admin/payInsertNew/'}" role="form" method="post" th:object="${memberPayUpdateDto}">
                                <div class="card-header py-3">
                                    <h4 id="updateRegDate" class="m-0 font-weight-bold text-brown" style="text-align: center;">수정 급여명세서</h4>
                                </div>
                                <div class="close-button" onclick="closeModal4()"><i class="fa-solid fa-xmark"></i></div>
                                <div class="card-body3">
                                    <div class="row">

                                        <div class="col-lg-6 d-none d-lg-block">
                                            <div class="p-52" style="text-align:right;">

                                                <table class="table-bordered dataTable" cellspacing="0" role="grid" style="text-align:center; width: 515px;">
                                                    <tbody>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">사번</td>
                                                        <td style="text-align:center;"><span id="updateId"></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">이름</td>
                                                        <td style="text-align:center;"><span id="updateName"></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">생년월일</td>
                                                        <td style="text-align:center;"><span id="updateBirth"></span></td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </div>
                                        </div>

                                        <div class="col-lg-6">
                                            <div class="p-52" style="text-align:right;">

                                                <table class="table-bordered dataTable" cellspacing="0" role="grid"  style="text-align:center; width: 515px;">
                                                    <tbody>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">부서</td>
                                                        <td style="text-align:center;"><span id="updateDepartment"></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">직위</td>
                                                        <td style="text-align:center;"><span id="updatePosition"></span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-brown font-weight-bold background-color-white" style="width:150px;">계좌번호</td>
                                                        <td style="text-align:center;"><span id="updateBank"></span></td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </div>
                                        </div>

                                    </div>

                                    <div class="card-body p-0612-1">
                                        <!-- Nested Row within Card Body -->

                                        <div class="row">
                                            <div class="col-lg-6 d-none d-lg-block">

                                                <div class="p-52">
                                                    <table class="table table-bordered dataTable" id="payUpdateTable1" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%;">
                                                        <thead>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" colspan="2" style="text-align: center;">
                                                                지급 항목
                                                            </td>
                                                        </tr>
                                                        </thead>

                                                        <tbody>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">기본급</td>
                                                            <td><input name="salaryUpdate" id="salaryUpdate" oninput="updateCalculateTotal()" onchange="this.value=formatNumber(this.value)" th:field="*{salary}" style="text-align:right; height:39px;" type="text" class="form-control" placeholder="기본급을(를) 입력해주세요."></td>
                                                            <input th:field="*{salary}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left;">상여금</td>
                                                            <td><input name="bonusUpdate" id="bonusUpdate" oninput="updateCalculateTotal()" onchange="this.value=formatNumber(this.value)" th:field="*{bonus}" style="text-align:right; height:39px;" type="text" class="form-control" placeholder="상여금을(를) 입력해주세요."></td>
                                                            <input th:field="*{bonus}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left;">야근수당</td>
                                                            <td><input name="nightPayUpdate" id="nightPayUpdate" oninput="updateCalculateTotal()" onchange="this.value=formatNumber(this.value)" th:field="*{nightPay}" style="text-align:right; height:39px;" type="text" class="form-control" placeholder="야근수당을(를) 입력해주세요."></td>
                                                            <input th:field="*{nightPay}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left;">식비</td>
                                                            <td><input name="foodPayUpdate" id="foodPayUpdate" oninput="updateCalculateTotal()" onchange="this.value=formatNumber(this.value)" th:field="*{foodPay}" style="text-align:right; height:39px;" type="text" class="form-control" placeholder="식비을(를) 입력해주세요."></td>
                                                            <input th:field="*{foodPay}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left;">차량지원금</td>
                                                            <td><input name="carPayUpdate" id="carPayUpdate" oninput="updateCalculateTotal()" onchange="this.value=formatNumber(this.value)" th:field="*{carPay}" style="text-align:right; height:39px;" type="text" class="form-control" placeholder="차량지원금을(를) 입력해주세요."></td>
                                                            <input th:field="*{carPay}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;"></td>
                                                            <td><input style="text-align:right;" type="text" disabled class="form-control" ></td>
                                                        </tr>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; height:39px;"></td>
                                                            <td><input style="text-align:right;" type="text" disabled  class="form-control" ></td>
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="font-weight-bold background-color-white" style="vertical-align: middle; text-align:left;">지급총액</td>
                                                            <td class="font-weight-bold background-color-white" name="updateplusMoney" id="payUpdateTotal" th:field="*{plusMoney}" style="text-align: right;">0원</td>
                                                            <input th:field="*{plusMoney}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>

                                            <div class="col-lg-6">
                                                <div class="p-52">
                                                    <table class="table table-bordered dataTable" id="payUpdateTable2" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%;">
                                                        <thead>
                                                        <tr>
                                                            <td class="text-brown font-weight-bold background-color-white" colspan="2" style="text-align: center;">
                                                                공제 항목
                                                            </td>
                                                        </tr>
                                                        </thead>

                                                        <tbody>
                                                        <tr style="height:64px;">
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">고용보험</td>
                                                            <td id="goInsuranceUpdate" th:field="*{goInsurance}" style="text-align: right;" type="text" class="font-weight" placeholder="고용보험을(를) 입력해주세요."></td>
                                                            <input name="goInsuranceUpdate" th:field="*{goInsurance}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">건강보험</td>
                                                            <td id="gunInsuranceUpdate" th:field="*{gunInsurance}" style="text-align: right;" type="text" class="font-weight" placeholder="건강보험을(를) 입력해주세요."></td>
                                                            <input name="gunInsuranceUpdate" th:field="*{gunInsurance}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">산재보험</td>
                                                            <td id="sanInsuranceUpdate" th:field="*{sanInsurance}" style="text-align: right;" type="text" class="font-weight" placeholder="기건강보험을(를) 입력해주세요."></td>
                                                            <input name="sanInsuranceUpdate" th:field="*{sanInsurance}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">국민연금</td>
                                                            <td id="kukInsuranceUpdate" th:field="*{kukInsurance}" style="text-align: right;" type="text" class="font-weight" placeholder="국민연금을(를) 입력해주세요."></td>
                                                            <input name="kukInsuranceUpdate" th:field="*{kukInsurance}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">소득세</td>
                                                            <td id="incomeTaxUpdate" th:field="*{incomeTax}" style="text-align: right;" type="text" class="font-weight" placeholder="소득세세을(를) 입력해주세요."></td>
                                                            <input name="incomeTaxUpdate" th:field="*{incomeTax}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="text-brown font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">지방소득세</td>
                                                            <td id="localTaxUpdate" th:field="*{localTax}" style="text-align: right;" type="text" class="font-weight" placeholder="지방소득세을(를) 입력해주세요."></td>
                                                            <input name="localTaxUpdate" th:field="*{localTax}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>

                                                        <tr style="height:64px;">
                                                            <td class="font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">공제총액</td>
                                                            <td class="font-weight-bold background-color-white" name="totalPrice2" id="updateMinusMoney" th:field="*{minusMoney}" style="text-align: right;">0원</td>
                                                            <input name="updateMinusMoney" th:field="*{minusMoney}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        <tr style="height:64px;">
                                                            <td class="font-weight-bold background-color-white" style="vertical-align: middle; text-align:left; width:128px;">차감지급액</td>
                                                            <td class="font-weight-bold background-color-white" id="deductionTotal2" th:field="*{TotalMoney}" style="text-align: right;">0원</td>
                                                            <input name="updateTotalMoney" th:field="*{TotalMoney}" style="text-align: right;" type="hidden" class="form-control">
                                                        </tr>
                                                        </tbody>
                                                    </table>

                                                    <!--            보안 관련 인증 토큰을 히든 파라미터로 보내줍니다-->
                                                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <button type="submit" class="btn btn-background-brown btn-user btn-block" style="width:150px; float: right;" onclick="return sweetAlert3(event); ">
                                        Confirm
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>



            </div>
        </div>
    </body>
</div>
</html>